# Ch3. 유니언과 리터럴

이 챕터에서는 유니언(Union)과 내로잉(narrowing)을 핵심 개념으로 소개한다.  
두 개념은 상반된 개념이다.

- 유니언 : 값에 허용된 타입을 두 개 이상 확장하는 것
- 내로잉 : 값에 허용된 타입을 하나만 가능하도록 좁히는 것

## 3.1 유니언 타입

두 개 이상의 타입이 가능하다면 `|`을 통해 타입을 여러 개 지정할 수 있다.

### 3.1.1 유니언 타입 선언

유니언 타입 선언은 타입 애너테이션으로 타입을 정의하는 모든 곳에서 사용 가능하다. 순서는 상관없다.

```ts
let mathematician: string | undefined =
  Math.random() > 0.5 ? undefined : 'Mark Goldberg';
```

### 3.1.2 유니언 속성

값이 유니언 타입이라면 유니언으로 선언한 타입에 존재하는 속성에만 접근할 수 있다.  
예를 들어 `number` 타입과 `string` 타입을 가지는 값이 있다면 `toString()` 메서드는 사용 가능하지만 `toUpperCase()`나 `toFixed()`는 어느 하나의 타입에서는 사용 불가능하므로 허용되지 않는다.

## 3.2 내로잉

> 유니언 타입으로 정의된 타입 중 하나의 타입으로 좁혀서 속성을 정의할 수 있도록 하는 것을 의미한다.

타입을 좁히는데 사용하는 논리적 검사를 **타입 가드**라고 부른다.

타입 가드에는 다음과 같은 방법이 있다.

### 3.2.1 값 할당을 통한 내로잉

유니온 타입의 변수에 값을 직접 할당하면 해당 할당 값의 타입으로 좁힐 수 있다.

```ts
let admiral: number | string;
admiral = 'Ikjun'; // 값을 할당, string 타입으로 좁힘
admiral.toUpperCase(); // string이므로 가능
admiral.toFixed(); // 에러 발생
```

유니온 타입으로 지정하면서 값을 동시에 할당도 가능한데 이때도 내로잉이 적용된다.

```ts
let admiral: number | string = 'Ikjun'; // string
```

### 3.2.2 조건 검사를 통한 내로잉

`if`문을 통해 값을 직접 확인하여 좁힐 수도 있다.

```ts
let a: number | string = Math.random() > 0.5 ? 'Ikjun' : 28;

if (a === 'Ikjun') {
  // string 타입
  a.toUpperCase(); // 가능 'IKJUN'
}

// number | string 타입
a.toUpperCase(); // 불가능 어떤 타입인지 모름
```

### 3.2.3 typeof 검사를 통한 내로잉

`typeof` 연산자를 통해 직접 타입을 확인하는 방법도 있다.

## 3.3 리터럴 타입

> 원시 타입 값 중 특정한 하나의 원시값 문자열으로 지정된 것을 말한다.

변수의 값을 통해 타입을 지정하는 것을 말한다.  
예를 들어 변수의 값을 "Ikjun"으로 할당하면 이 값의 타입은 `string`이자 리터럴 `Ikjun` 문자열 타입이라고 말할 수 있다.

이게 가능한가? 좀 헷갈린다...

## 3.4 엄격한 null 검사

잠재적으로 정의되지 않은 `undefined` 및 `null`값을 검사한다.

### 3.4.1 십억 달러의 실수

이 두 타입인지 확인하지 않으면 십억 달러 가치의 실수라는 의미 같다.

### 3.4.2 참 검사를 통한 내로잉

`if(변수)` 구문을 통해 해당 변수가 `null` 또는 `undefined`인지 손쉽게 검사가 가능하다.
하지만 빈 문자열을 체크할 수 없기 때문에 이 부분에 대해서는 추가적인 조건문이 필요하다. `length`와 같은?

### 3.4.3 초기값이 없는 변수

초기값이 없이 할당되면 기본적으로 `undefined`가 된다.  
따라서 값에 `undefined`의 타입을 지정해놓고 할당하지 않으면 값 자체가 `undefined`가 되니까 문제가 발생할 수 있다. 주의하자.

## 3.5 타입 별칭 (Alias)

타입 이름을 커스텀하여 지정할 수 있다.  
`type 새로운 이름 = 타입` 형태로 지정하면 된다.  
타입이 복잡해질수록 유용하니 애용하자.

### 3.5.1 타입 별칭은 자바스크립트가 아니다

타입 별칭은 타입스크립트 문법이다. 자바스크립트 컴파일에는 나타나지 않는다.

### 3.5.2 타입 별칭 결합

타입 별칭을 유니온 요소로 포함시킬 수 있다.
