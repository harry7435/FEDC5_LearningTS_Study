# Ch5. 함수

함수에서 매개변수 및 반환값의 타입을 지정하는 방법을 배워보자

## 5.1 함수 매개변수

함수 매개변수에 타입을 지정하지 않으면 `any` 타입으로 지정된다.
따라서 개발자가 원하는 타입이 있다면 변수에 타입을 지정하듯이 똑같이 지정해주어야 한다.

```ts
// sing 함수 매개변수 song의 타입을 string로 지정
function sing(song: string) {
  console.log(`Singing: ${song}!`);
}
```

### 5.1.1 필수 매개변수

JS와 달리 TS에서는 함수의 타입이 지정된 매개변수의 **갯수**는 호출할 때 똑같이 유지되어야 한다.
예를 들어 두 개의 매개변수를 선언하고 한 개의 매개변수만 호출할 때 사용하면 에러가 발생한다.

### 5.1.2 선택적 매개변수

필수 매개변수가 아닌 선택적으로 호출하고 싶은 매개변수가 있다면 `?`를 매개변수 뒤에 붙여서 **선택적 매개변수**를 지정할 수 있다.

선택적 매개변수가 호출 시 주어지지 않으면 `undefined`로 암묵적으로 지정된다.
이 때 헷갈리면 안되는데 필수 매개변수는 `| undefined`를 유니온으로 명시적으로 지정했더라도 항상 호출 시 제공해야 한다.

선택적 매개변수는 필수 매개변수보다 앞에 위치할 수 없다. 필수 매개변수를 모두 정의하고 이후에 그 뒤에 선택적 매개변수를 정의해야 에러가 나지 않는다.

### 5.1.3 기본 매개변수

JS에서는 `=`을 통해 매개변수의 기본값을 제공할 수 있다. 이럴 경우 선택적 매개변수로 취급이 된다.
TS에서도 마찬가지로 기본값을 제공할 수 있고 이것을 선택적 매개변수로 취급하므로 호출 시 생략할 수 있다.
타입 추론 시 `기본값의 타입 | undefined`로 추론하게 된다. 다른 타입은 허용되지 않는다.

### 5.1.4 나머지 매개변수

JS에서 `...` 스프레드 연산자로 매개변수를 지정하게 되면 나머지 인수로 단일 배열에 저장된다.
따라서 타입을 지정할 때 `[]`을 사용해야 한다.
나머지 매개변수도 선택적 매개변수와 같이 호출 시 지정하지 않아도 괜찮다.

<br>

---

## 5.2 반환 타입

매개변수와 같이 함수의 반환값도 타입을 지정할 수 있다.
기본적으로 TS는 매개변수의 타입을 통해 함수 실행 시 반환값의 타입을 추론한다.
하지만 정확하게 타입을 지정해주는 것이 예상치 못한 에러를 대비하는 데 도움이 된다.

### 5.2.1 명시적 반환 타입

변수와 마찬가지로 함수의 반환 타입을 명시적으로 선언하지 않는 것이 좋다(?? 이거 왜 이런거죠? 안 좋은거 아닌가요?)

반환값에 대한 타입은 매개변수 () 뒤에 `:반환값 타입` 형태로 선언한다.

<br>

---

## 5.3 함수 타입

함수 자체를 화살표 함수 형태로 타입으로 선언할 수 있다.
`(매개변수 타입) => 반환값 타입` 형태로 선언한다.
함수 타입은 콜백 매개변수의 타입을 선언할 때에 자주 사용된다.

### 5.3.1 함수 타입 괄호

함수나 반환값 등 구분을 하기 위해 괄호로 적절하게 묶어주어야 한다. 괄호에 따라 타입의 의미가 달라지기 때문에 주의한다.

### 5.3.2 매개변수 타입 추론

매개변수는 이전에 선언된 함수나 함수를 매개변수를 갖는 함수(메서드)는 타입을 유추 가능하므로 일일히 타입을 지정하지 않아도 된다!

### 5.3.3 함수 타입 별칭

함수 타입도 타입 별칭을 통해 커스텀화할 수 있다. 타입 별칭으로 함수 타입을 변수화하게 되면 간결한 코드를 작성할 수 있다.

<br>

---

## 5.4 그 외 반환 타입

### 5.4.1 void 반환 타입

함수 중에서 반환값이 없는 함수도 있다.
return 문이 없거나 return 문에 반환값이 명시되어 있지 않은 경우가 해당한다.
이럴 경우에는 해당 함수의 반환값 타입을 나타낼 때 **void** 키워드를 사용한다.

- 질문. 함수 반환값에 아무 타입을 지정하지 않으면 void가 자동 할당되나요?

### 5.4.2 never 반환타입

never 타입은 함수가 절대 반환하지 않도록 의도해서 명시하는 타입니다.
오류 발생이나 무한 루프 실행 함수에 적용할 수 있다.

> `void`는 아무것도 반환하지 않는 함수, 반환값이 비어있는 `null`가 비슷한 개념이고
> `never`는 절대 반환하지 않는 함수, `undefined`와 비슷한 개념이다.

<br>

---

## 5.5 함수 오버로드

함수의 매개변수와 반환값이 경우에 따라 바뀌는 경우가 생길 수 있다.
이럴 경우 각각 경우에 대해서 타입만 지정해주는 것이 **오버로드 시그니처**이다.
여러 개의 오버로드 시그니처와 마지막 최종 구현 시그니처를 함께 작성할 수 있다.

주의할 점

- 구현 시그니처는 마지막에 위치해야 한다.
- 복잡한 함수 타입을 구현하기 위해 오버로딩을 사용하지만 최후의 수단이므로 사용을 지양하는 것이 좋다.

### 5.5.1 호출 시그니처 호환성

오버로드 시그니처는 구현 시그니처로 호환이 가능해야 한다. 구현 시그니처에서 오버로드 시그니처를 만족하지 않는 타입을 사용 불가능하다.

```ts
// 오버로드 시그니처
function format(data: string): string;
function format(data: string, neddle: string, haystack: string): string;

function format(getData: () => string): string; // 구현 시그니처와 호환이 불가능

// 구현 시그니처
function format(data: string, needle?: string, hatstack?: string) {
  return needle && haystack ? data.replace(needle, haystack) : data;
}
```
